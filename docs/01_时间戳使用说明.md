# 时间戳使用说明

FaGe.Kcp中的时间戳使用分为两种场景：

## 1. 网络协议时间戳（必须两端一致）
KCP协议使用时间戳计算RTT（往返时间）和重传超时。**两端必须使用相同的时间基准**，推荐使用UTC时间确保跨机器一致性。

```csharp
// ✅ 推荐：使用UTC时间戳（两端都使用，确保一致性）
uint protocolTimestamp = (uint)DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();
await connection.UpdateAsync(protocolTimestamp, cancellationToken);
```

## 2. 本机性能跟踪（仅本地有效）
```csharp
// 本机性能监控（不参与网络通信）
long localTimestamp = Environment.TickCount64;
LogPerformance(localTimestamp);
```

**关键原则**：只要两端使用相同的时间源，KCP就能正常工作。UTC时间是推荐的跨机器方案。

---
本文完全由人工编写，没有机器人参与🤖
IP：生化斯坦