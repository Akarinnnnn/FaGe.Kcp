# æ ¸å¿ƒæ¦‚å¿µ

## KcpApplicationPacket
KCPåº”ç”¨å±‚æ•°æ®åŒ…è½½ä½“ï¼Œ**å¿…é¡»åœ¨ä½¿ç”¨åç«‹å³é‡Šæ”¾**ï¼š

```csharp
// âœ… æœ€ä¼˜æ–¹æ¡ˆ
KcpApplicationPacket packet = await connection.ReceiveAsync(ct);
// æˆ– packet = connection.TryReadPacket(ct);
if (packet.IsNotEmpty)
{
    ReadOnlySequence<byte> buffer = packet.Result.Buffer; // ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€æ‹·è´
    ProcessData(buffer);
    packet.Dispose(); // ç«‹å³é‡Šæ”¾
}

// âœ… éœ€è¦æŒä¹…åŒ–æ—¶
KcpApplicationPacket packet = await connection.ReceiveAsync(ct);
if (packet.IsNotEmpty)
{
    byte[] dataCopy = packet.Result.Buffer.ToArray(); // åˆ›å»ºå‰¯æœ¬
    packet.Dispose(); // ç«‹å³é‡Šæ”¾
    // å¯ä»¥å®‰å…¨åœ°åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨dataCopy
}

// âŒ é”™è¯¯ï¼šæŒæœ‰å¤šä¸ªå¼•ç”¨
var packet1 = await connection.ReceiveAsync(ct);
var packet2 = packet1; // æµ…æ‹·è´ï¼Œå…±äº«ç¼“å†²åŒº
// åç»­åˆ†åˆ«é‡Šæ”¾ä¼šå¯¼è‡´å¤šé‡é‡Šæ”¾é—®é¢˜ï¼Œä¾‹å¦‚åŒä¸€çº¿ç¨‹è¿è¡Œä»¥ä¸‹ä»£ç ï¼š
packet1.Dispose(); // æ­£ç¡®é‡Šæ”¾
packet2.Dispose(); // é‡Šæ”¾äº†åé¢æ•°æ®åŒ…çš„åˆ†æ®µ
```

## KcpSendResult
å‘é€æ“ä½œç»“æœå°è£…ï¼ŒåŒ…å«å‘é€çŠ¶æ€ã€å­—èŠ‚æ•°å’Œå¤±è´¥åŸå› ã€‚

## KcpConnection
æ ¸å¿ƒè¿æ¥ç±»ï¼Œç®¡ç†UDPä¼ è¾“å’ŒKCPåè®®çŠ¶æ€ã€‚

## æµæ¨¡å¼ vs åŒ…æ¨¡å¼
| ç‰¹æ€§ | åŒ…æ¨¡å¼ (é»˜è®¤) | æµæ¨¡å¼ |
|------|---------------|--------|
| æ¶ˆæ¯è¾¹ç•Œ | ä¿æŒå®Œæ•´è¾¹ç•Œ | å¯èƒ½æ‹†åŒ…/ç²˜åŒ… |
| é€‚ç”¨åœºæ™¯ | æ¶ˆæ¯é€šä¿¡ã€RPC | æ–‡ä»¶ä¼ è¾“ã€æµåª’ä½“ |
| é…ç½® | `IsStreamMode = false` | `IsStreamMode = true` |
| åˆ†ç‰‡å¤„ç† | è‡ªåŠ¨åˆ†ç‰‡/é‡ç»„ | è¿ç»­æ•°æ®æµ |

```csharp
connection.IsStreamMode = true; // å¯ç”¨æµæ¨¡å¼
---
æœ¬æ–‡å®Œå…¨ç”±äººå·¥ç¼–å†™ï¼Œæ²¡æœ‰æœºå™¨äººå‚ä¸ğŸ¤–
IPï¼šç”ŸåŒ–æ–¯å¦